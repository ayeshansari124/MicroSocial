<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Search</title>

  <!-- Tailwind -->
  <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>

  <!-- Icons -->
  <script src="https://kit.fontawesome.com/a2e0e6ad48.js" crossorigin="anonymous"></script>

  <style>
    /* Match Feed Page Theme */
    .glass-card {
      background: rgba(30,30,30,0.22);
      border: 1.5px solid rgba(255,255,255,0.15);
      box-shadow: 0 4px 32px rgba(0,0,0,0.25);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      transition: background 0.2s, border 0.2s;
    }
    .glass-card:hover {
      background: rgba(50,50,50,0.35);
      border-color: rgba(255,255,255,0.28);
    }
  </style>
</head>

<body class="bg-black text-white min-h-screen">
  
  <%- include('partials/header', { user: user }) %>

  <div class="max-w-3xl mx-auto p-6">

    <!-- SEARCH BAR -->
    <form action="/search" method="get" class="mb-8 w-full">
      <div class="relative w-full">

        <input 
          type="text" 
          name="q" 
          placeholder="Search users..." 
          value="<%= query || '' %>" 
          class="w-full px-5 py-4 pr-14 rounded-2xl bg-zinc-900 text-white text-lg
                 focus:ring-2 focus:ring-blue-500 focus:outline-none border border-white/10"
        />

        <button 
          type="submit" 
          class="absolute right-5 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white"
        >
          <i class="fa-solid fa-magnifying-glass text-2xl"></i>
        </button>

      </div>
    </form>

    <!-- RESULTS -->
    <% if (!results || results.length === 0) { %>

      <div class="text-zinc-400 text-lg text-center">No users found.</div>

    <% } else { %>

      <div class="flex flex-col gap-4">

        <% results.forEach(u => { %>
          <a 
            href="/user/<%= u._id %>" 
            class="glass-card flex items-center gap-4 p-4 rounded-2xl w-full sm:w-2/3 mx-auto cursor-pointer transition"
          >
            <img 
              src="<%= u.profile || '/profile/defaultProfile.png' %>" 
              class="w-14 h-14 rounded-full object-cover border border-white/20"
            />

            <div class="flex flex-col">
              <div class="font-semibold text-xl"><%= u.name %></div>
            </div>
          </a>
        <% }) %>

      </div>

    <% } %>

  </div>
</body>
</html>
